# Truth Lens 测试方案 (Testing Scheme) - V1.0

## 1. 测试目标
确保浮窗在各种复杂的网页环境下都能保持交互的一致性、布局的稳定性以及功能的完备性。

## 2. 核心功能测试用例 (Functional Testing)

### 2.1 唤醒逻辑 (Trigger)
- [ ] **基本唤醒**: 选中文本 > 10 字符，气泡准确定位在鼠标上方。
- [ ] **字数限制**: 选中文本 < 10 字符，气泡不应出现。
- [ ] **多行选中**: 跨行选中大段文本，气泡应定位在选中区域的末尾或中心上方。
- [ ] **重复选择**: 已有气泡时重新选中文本，旧气泡销毁并在新位置弹出。

### 2.2 形态转换 (Morphing)
- [ ] **移入展开**: 鼠标移入 BUBBLE，平滑变为 ACTION_BAR。
- [ ] **移出保持**: 根据交互方案，ACTION_BAR 展开后是否需要移出收起？(目前定义为展开后保持，直到点击分析或关闭)。
- [ ] **快速闪动**: 鼠标快速在气泡边缘移入移出，动效不应出现抖动或卡死。

### 2.3 销毁逻辑 (Dismiss)
- [ ] **空白点击**: 气泡/面板显示时，点击网页空白处，浮窗销毁。
- [ ] **关闭按钮**: 点击 ACTION_BAR 里的“关闭”按钮，浮窗立即销毁。
- [ ] **面板关闭**: 点击分析面板顶部的 X 按钮，销毁整个浮窗。

## 3. 兼容性与边界测试 (Edge Cases)

### 3.1 布局边界
- [ ] **屏幕顶端**: 选中的文字在屏幕最顶部，气泡应自动调整到文字下方。
- [ ] **屏幕右侧**: 选中的文字在屏幕最右侧，Action Bar 展开时不应超出屏幕产生横向滚动条。
- [ ] **动态滚动**: 在气泡显示时滚动页面，气泡应消失或精准跟随（取决于最终实现方案，建议消失）。

### 3.2 网页干扰
- [ ] **高 Z-Index 干扰**: 在 B 站、微博等具有复杂层级的页面上，检查浮窗是否被网页原有元素遮挡。
- [ ] **Dark Mode**: 在开启暗黑模式的网页（如 Github）中，检查玻璃拟态的可见性。
- [ ] **iframe 嵌套**: 在包含 iframe 的页面（如某些博客）中，检查定位是否偏移。

## 4. 网络与数据测试 (Network)
- [ ] **流式显示**: 模拟慢速网络，观察文字是否平滑逐字出现。
- [ ] **后端崩溃**: 模拟 500 错误，面板应显示“验证失败”提示及重试/关闭入口。
- [ ] **超时处理**: 请求超过 15 秒未响应的处理逻辑。

## 5. 验收标准 (Definition of Done)
1. 动效在 Chrome (Mac/Windows) 下无明显掉帧。
2. 没有任何 CSS 样式泄露到宿主页面，也不受宿主页面样式影响。
3. 内存占用平稳，频繁触发不导致浏览器卡顿。
